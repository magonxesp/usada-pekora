version: "3"

services:
  backend:
    ports:
      - "1337:1337"
    user: 1000:1000
    command: ["sh", "-c", "npm install && npm run develop"]
    volumes:
      - ./backend:/app

  discord_bot:
    environment:
      DISCORD_BOT_TOKEN: NzU1ODYwMDQ2NTQ1NTUxNDkx.GgEUAf.JFv2dRUDBIt9JHnbMaELlXiCvHt82fkYNwTHH4
      BACKEND_BASE_URL: "http://localhost:1337"
      BACKEND_TOKEN: "70b210852d523da675e853323fe745ad8337f7473de064c1031422b18f9d9c7ea728fdccfcd91f341773f02aa189ccba65251ef05a79c1f9868780ea9551cdeaf6e36a951344cdc8f196df87157fc80c411aa290fecc5c57c0541980710f077715dfbf9da252d2ec452c8b19e1bf95d616bd3c522db3cb9cb560dac3a4543a3b"
      HTTP_BASE_URL: "http://2db7-79-158-179-70.ngrok.io"

  backend_database:
    ports:
      - "3306:3306"

  discord_bot_database:
    ports:
      - "27017:27017"

  discord_bot_cache:
    ports:
      - "6379:6379"
